<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 추가</title>

    <style>
        table{
            border-collapse: collapse;
        }
    </style>
</head>
<body>

    <h1>상품 추가</h1>
    <button id="addBtn">새로운 상품 추가</button>
    
    <hr>

    <table border="1">
        <thead>
            <tr>
                <th>상품명</th>
                <th>가격(원)</th>
            </tr>
        </thead>

        <tbody class="container">
            <tr>
                <td>  <input type="text" class="pName">  </td>
                <td>  <input type="number" class="price">  </td>
            </tr>
        </tbody>
    </table>

    <hr>
    <button id="resultBtn">결과 확인</button>
    
    <h3>상품 개수 : <span id="amount"></span></h3>
    <h3>전체 가격 : <span id="sum"></span></h3>


    <script>
            const addBtn = document.getElementById("addBtn");
    const container = document.getElementsByClassName("container")[0];   
    

    // 새로운 상품 추가 버튼 클릭시 
    addBtn.addEventListener("click",()=>{

        // td2
        const tr = document.createElement("tr");
        const td1 = document.createElement("td");
        const td2 = document.createElement("td");
        
        // input 2ea 
        const input1 = document.createElement("input");
        const input2 = document.createElement("input");

        // 각각의 input 태그에 type 지정
        input1.setAttribute("type","text"); // 타입이 텍스트
        input2.setAttribute("type","number"); // 타입이 넘버

        // 각각 input태그에 class를 추가 

        input1.classList.add("pName");
        input2.classList.add("price");

        // 알맞은 형태로 조립

        // .container -> tr -> td 2ea -> input each other
        td1.append(input1); // 자식으로 input1추가
        td2.append(input2); // 자식으로 input2 추가

        // tr의 자식으로 td1, td2 추가
        tr.append(td1); 
        tr.append(td2);

        container.append(tr);

    });
    const resultBtn = document.getElementById("resultBtn");
    const amountSpan = document.getElementById("amount");
    const sumSpan = document.getElementById("sum");

    resultBtn.addEventListener("click",()=>{

        const priceList = document.getElementsByClassName("price");
        // console.log(priceList);
        // 상품 개수
        amountSpan.innerText = priceList.length;

        let sum = 0;
        
        // priceList의 요소를 하나씩 순차 접근
        // 각각의 값을 얻어와 sum에 누적

        for(let price of priceList){
        price.innerText = price.value;    
        sum += Number(price.value);
        }
        sumSpan.innerText = sum;


    });

    </script>
</body>
</html>